---
layout: post
title: Browsers and how they work?
date: 2021-11-17 10:00:00 +0900
category: internet
---
# Browsers and how they work?
### 웹브라우저와 웹서버
웹브라우저가 웹서버에 웹페이지 요청을 하면 웹서버는 웹페이지 응답을 한다.
서버가 브라우저에게 전달한 응답인 HTML문서를 브라우저는 읽어들이고 해석한 후 사용자에게 보여준다.
HTML 및 CSS를 해석하는 구체적인 내용들은 모두 W3C에 의해 관리되고 유지된다. 지난 몇년간 브라우저들은 각자 이러한 구체적 규정들의 일부만 충족하며 각 브라우저별 확장 기능을 개발해 왔다.

![alt text](/public/img/internet1.png){: width="50%"}

### 브라우저의 주요 기능
사용자가 선택한 자원을 서버에 요청하고 브라우저에 요청하는 것이다. 자원은 보통 HTML문서지만 PDF나 이미지 또는 다른 형태일 수 있다. 자원의 주소는 URI에 의해 정해진다.

### 웹 브라우저의 구조와 렌더링 엔진

![alt text](/public/img/internet2.png){: width="45%"}

1. 사용자 인터페이스 - 주소 표시줄, 이전/다음 버튼, 북마크 메뉴 등 요청한 페이지를 보여주는 창을 제외한 나머지 모든 부분이다.
2. 브라우저 엔진 - 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어
3. 렌더링 엔진 - 요청한 콘텐츠를 표시, 예를 들어 HTML을 요청하면 HTML과 CSS를 파싱하여 화면에 표시한다.
4. 통신 - HTTP 요청과 같은 네트워크 호출에 사용된다. 이것은 플랫폼 독립적인 인터페이스이고 각 플랫폼 하부에서 실행된다.
5. UI백엔드 - 콤보 박스와 창 같은 기본적인 장치를 그린다. 플랫폼에서 명시하지 않은 일반적인 인터페이스로서, OS 사용자 인터페이스 체계를 사용한다.
6. 자바스크립트 해석기 - 자바스크립트 코드를 해석하고 실행한다.
7. 자료 저장소 - 이 부분은 자료를 저장하는 계층이다. 쿠키를 저장하는 것과 같이 모든 종류의 자원을 하드 디스크에 저장할 필요가 있다. HTML5명세에는 브라우저가 지원하는 '웹 데이터 베이스'가 정의되어 있다.

### 렌더링 엔진
렌더링 엔진은 웹서버로부터 전달받은 HTML문서를 맨 처음 네트워크 레이어에서 불러온다.
렌더링 엔진의 기본적인 작동 방식이다.

1. HTML 파싱 후 DOM 트리 만들기
2. 렌더 트리 만들기
3. 렌더 트리 레이아웃 만들기
4. 렌더 트리 페인팅

![alt text](/public/img/internet3.png){: width="45%"}

##### HTML 파싱 후 DOM 트리 만들기
렌더링 엔진은 우선 네트워크 레이어를 통해 전달받은 HTML 문서를 파싱하여 각 요소들을 DOM Tree의 각 DOM노드들로 전환한다.
DOM이란 Document object model의 준말로 마크업 형태의 HTML 문서를 오브젝트 모델의 형태로 바꿔놓은 것이다. 당연히 HTML 문서의 각 마크업과 DOM의 각 요소는 1:1 매칭된다.

```html
<html>
    <body>
        <p>Hello World</p>
        <div><img src="example.png"/></div>
    </body>
</html>
```

이 코드를 DOM Tree로 전환할 때 아래와 같이 구성된다.

![alt text](/public/img/internet4.png){: width="50%"}

##### 렌더 트리 만들기
HML문서들을 파싱하여 DOM Tree를 구성한 후, 렌더링 엔진은 CSS/Style 데이터를 파싱하고 그 스타일 데이터들로 렌더트리를 만든다. DOM트리가 웹 상에 나타날 내용을 구성한다면 렌더 트리는 시각적 요소, 어떻게 나타날지 그 스타일을 지정한다. 렌더 트리는 색상, 차원 등 시각적 지침들을 담은 정사각형들로 구성되며 정사각형들은 스크린에 맞는 순서대로 정렬되어야 한다.

##### 렌더 트리 레이아웃 만들기
레이아웃을 만든다는 것은 각 노드들에게 스크린의 어느 공간에 위체해야 할 지 각각의 값을 부여하는 것을 의미한다.

##### 렌더 트리 페인팅
렌더트리가 만들어져 레이아웃이 구성된 후 UI 백엔드가 동작하여 각 노드들을 정해진 스타일 및 위치값대로 화면에 배치한다.

더 나은 UX를 위해 렌더링 엔진은 각 콘텐츠를 가능한 빨리 스크린에 띄어야 한다. 따라서 모든 HTML 요소들을 렌더링 엔진으로 넣어서 한번에 출력하는 것이 아니라, 일부 콘텐츠는 먼저 트리과정을 거쳐 스크린에 나타나고, 그 와중에 웹의 다른 요소들은 네트워크를 통해 렌더링 엔진으로 읽어들어 오는 순차적인 방식으로 입출력이 진행된다.



참고 
[https://it-ist.tistory.com/110][tistory],
[https://d2.naver.com/helloworld/59361][naver]

[tistory]: https://it-ist.tistory.com/110
[naver]: https://d2.naver.com/helloworld/59361